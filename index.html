<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>èµ¤å±±ç´…é¾œç²¿ç·šä¸Šè¨‚è³¼å¹³å°</title>

<style>
body { font-family: Arial; background:#f4f4f4; margin:0 }
header { background:#333; color:#fff; text-align:center; padding:10px }
.container { display:flex; flex-wrap:wrap; justify-content:center; gap:20px; padding:20px }
.product-card {
  background:#fff; width:180px; padding:10px; border-radius:8px;
  box-shadow:0 2px 5px rgba(0,0,0,.2); text-align:center
}
.product-card img { width:160px; height:160px; object-fit:cover; border-radius:8px }
.cart { position:fixed; right:15px; top:15px; font-size:24px; cursor:pointer }
.cart-popup {
  position:fixed; right:15px; top:60px; background:#fff; padding:15px;
  width:280px; display:none; border-radius:8px;
  box-shadow:0 2px 5px rgba(0,0,0,.3)
}
.cart-popup input { width:100%; margin:5px 0 }
</style>
</head>

<body>

<header>
<h1>èµ¤å±±ç´…é¾œç²¿ç·šä¸Šè¨‚è³¼å¹³å°</h1>
</header>
<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSf6sJo3vem8fPrng1AIlHpdIUX_2406BS5DcgSVxBd6NFabOQ/viewform?embedded=true" width="1150" height="700" frameborder="0" marginheight="0" marginwidth="0">è¼‰å…¥ä¸­â€¦</iframe>
  <div class="product-card">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Qingtuan_in_Tangqi_2014-04.jpg/960px-Qingtuan_in_Tangqi_2014-04.jpg">
    <h3>è‰ä»”ç²¿</h3>
    <p>NT$200</p>
    <button onclick="addToCart('è‰ä»”ç²¿',200)">åŠ å…¥è³¼ç‰©è»Š</button>
  </div>

  <div class="product-card">
    <img src="https://i.imgur.com/qX9QZ4H.jpg">
    <h3>ç´…é¾œç²¿</h3>
    <p>NT$200</p>
    <button onclick="addToCart('ç´…é¾œç²¿',200)">åŠ å…¥è³¼ç‰©è»Š</button>
  </div>
</div>

<div class="cart" onclick="toggleCart()">ğŸ›’</div>

<div class="cart-popup" id="cart">
  <ul id="cartList"></ul>

  <input id="name" placeholder="å§“å">
  <input id="phone" placeholder="é›»è©±">
  <input id="email" placeholder="Email">
  <input id="address" placeholder="åœ°å€">

  <button onclick="checkout()">é€å‡ºè¨‚å–®</button>
</div>

<script>
let cart = [];

function addToCart(name, price){
  const item = cart.find(i=>i.name===name);
  item ? item.qty++ : cart.push({name, price, qty:1});
  render();
}

function render(){
  const ul = document.getElementById('cartList');
  ul.innerHTML='';
  cart.forEach(i=>{
    ul.innerHTML += `<li>${i.name} x${i.qty}</li>`;
  });
}

function toggleCart(){
  const c = document.getElementById('cart');
  c.style.display = c.style.display==='block'?'none':'block';
}

async function checkout(){
  const data = {
    customer:{
      name:name.value,
      phone:phone.value,
      email:email.value,
      address:address.value
    },
    items:cart,
    totalAmount:cart.reduce((t,i)=>t+i.price*i.qty,0)
  };

  const res = await fetch(
    'https://script.google.com/macros/s/AKfycbw-EvUJbRp36HtbAqP7wSqpM00K_AJxXKZ70q44PdAQRwAgop_Q0V02V-NMUOSxlbeK/exec',
    {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify(data)
    }
  );

  alert('è¨‚å–®å·²é€å‡º');
  cart=[];
  render();
  toggleCart();
}
</script>

</body>
</html>
